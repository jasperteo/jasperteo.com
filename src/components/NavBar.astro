---
import { DarkModeToggle } from "@/components/dark-mode-toggle";
import { buttonVariants } from "@/components/ui/button-variants";
import { Separator } from "@/components/ui/separator";
import { storageKey } from "@/lib/utils";
import type { Theme } from "@/lib/utils";

const { pathname } = Astro.url;
const isActive = (href: string) =>
  href === pathname || href === pathname.replace(/\/$/, "");

type NavListType = {
  href: string;
  icon: string;
  label: string;
};

const navList: NavListType[] = [
  { href: "/", icon: "carbon:home", label: "Home" },
  { href: "/projects", icon: "carbon:devices-apps", label: "Projects" },
];

const storedTheme: Theme = Astro.cookies.get(storageKey)?.value as Theme;
---

<nav
  class="my-5 h-9 flex place-content-center gap-2 font-title sm:my-10 sm:mr-10 sm:justify-end"
>
  {
    navList.map(({ href, icon, label }) => (
      <>
        <a
          href={href}
          class:list={[
            buttonVariants({ variant: "ghost" }),
            { active: isActive(href) },
            "shadow-primary/20 [&.active]:animate-swing [&.active]:animate-delay-150 sm:text-base [&.active]:shadow-lg",
          ]}
        >
          <iconify-icon icon={icon} class="mr-2 text-xl" />
          {label}
        </a>
        <Separator orientation="vertical" />
      </>
    ))
  }
  <div class="mx-4 h-9 w-9">
    <DarkModeToggle
      storedTheme={storedTheme}
      client:only="react"
      transition:persist="ThemeToggle"
    />
  </div>
</nav>
